/*******************************************************************************
 * Includes
 ******************************************************************************/

#include "rng.h"
#include <stdint.h>
#include <stdlib.h>

/*******************************************************************************
 * Macros
 ******************************************************************************/

/*******************************************************************************
 * Types
 ******************************************************************************/

/*******************************************************************************
 * Internal function declaration
 ******************************************************************************/

uint32_t _RandType0(void);

/*******************************************************************************
 * Variables
 ******************************************************************************/

uint32_t rng_seed = 1;
const uint32_t RNG_RAND_MAX = 0x7FFFFFFF;

/*******************************************************************************
 * Public function
 ******************************************************************************/

/*
 * Init seed
 */
void RNG_Srand(uint32_t seed) { rng_seed = seed; }

/*
 * rand() [|0, RNG_RAND_MAX]
 */
uint32_t RNG_RandInt(void) { return _RandType0(); }

/*
 * Uniform [0, 1]
 */
double RNG_RandDouble(void) { return (double)_RandType0() / RNG_RAND_MAX; }

/*******************************************************************************
 * Internal function
 ******************************************************************************/

/*
 * Returns a 31-bit random number.
 * linear congruential generators
 * rand()in BSD ANSI C : m = 2^31, a = 1103515245U, b = 12345
 */
uint32_t _RandType0(void) {
  return (rng_seed = ((rng_seed * 1103515245U) + 12345U) & 0x7FFFFFFF);
}
